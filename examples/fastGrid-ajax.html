<!DOCTYPE html>
<html>
<head><title>fastGrid-ajax-nowrap</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../public/styles/reset.css">
    <link rel="stylesheet" href="../public/styles/base.css">
    <link rel="stylesheet" href="../public/scripts/widgets/fastGrid/fastGrid.css">
    <link rel="stylesheet" href="../public/scripts/widgets/paginator/paginator.css">
    <style>.wrapper {
        width: 70%;
        height: 70%;
        margin: 0 auto;
        padding: 80px 0 0 0;
    }



    .fields .button {
        margin: 0px 5px 0px 0px;
    }

    .btnPrice {
        display: block;
        width: 16px;
        height: 16px;
        margin: 0px auto;
        background: url(../public/images/botton_g1.gif) no-repeat;
    }

    .btnPriceSelected {
        background: url(../public/images/botton_g2.gif) no-repeat;
    }

    </style>
</head>
<body>
<div class="wrapper">
    <h1>启动标题自动充满表格，表格可在调整窗口尺寸时根据父元素调整尺寸。</h1>
    <table id="quoteTable"></table>
    <div style="text-align:right;">
        <div id="search"></div>
    </div>
</div>
<script src="../public/scripts/jquery/jquery-1.7.2.min.js"></script>
<script src="../public/scripts/plugins.js"></script>
<script src="../public/scripts/widgets/fastGrid/fastGrid.js"></script>
<script src="../public/scripts/widgets/paginator/paginator.js">;</script>
<script src="../public/scripts/json2.js"></script>
<script>$(document).ready(function () {
    var cols = [
        {title:'行情', name:'', width: 30, align: 'center',sortable: true, renderer: function(val,item,items,rowIndex,row){
            var $a = $('<a href="#" class="btnPrice"></a>').hover(function (e) {
                $(this).toggleClass('btnPriceSelected', e.type === 'mouseenter');
            }).on('click', function(){
                alert(JSON.stringify(item));
            });
            return $a;
        }},
        {title:'名称', name:'', width: 150, sortable: true, align: 'center', renderer: function(val,item){
            return item.SECUABBR + '(' + item.SECUCODE + ')';
        }},
        {title:'今收盘', name:'CLOSINGPRICE', width: 50, sortable: true, align: 'right', renderer: function(val,item){
            return val.toFixed(2);
        }},
        {title:'涨跌额', name:'DAYCHANGE', width: 50, align: 'right', renderer: function(val){
            if(val > 0){
                return '<span style="color: #b00">' + val.toFixed(2) + '</span>';
            }else if(val < 0){
                return '<span style="color: #0b0">' + val.toFixed(2) + '</span>';
            }
            return val.toFixed(2);
        }},
        {title:'涨跌幅', name:'DAYCHANGERATE', width: 50, align: 'right', sortable: true, renderer: function(val){
            if(val > 0){
                return '<span style="color: #b00">' + val.toFixed(2) +'%' + '</span>';
            }else if(val < 0){
                return '<span style="color: #0b0">' + val.toFixed(2) +'%' + '</span>';
            }
            return val.toFixed(2)+'%';
        }},
        {title:'振幅', name:'AMPLITUDE', width: 50, align: 'right', renderer: function(val){
            return val.toFixed(2)+'%';
        }},
        {title:'成交量(手)', name:'TURNOVERVOL', width: 50, align: 'right', renderer: function(val){
            return (val / 100).toFixed(2);
        }},
        {title:'成交额(万)', name:'TURNOVERVAL', width: 50, align: 'right', renderer: function(val){
            return (val / 10000).toFixed(2);
        }},

        {title:'昨收盘', name:'PREVCLOSINGPRICE', width: 50, align: 'right', renderer: function(val){
            return val.toFixed(2);
        }},
        {title:'今开盘', name:'OPENINGPRICE',type: 'float', width: 50, sortable: true, align: 'right', renderer: function(val){
            return val.toFixed(2);
        }},

        {title:'最高价', name:'HIGHESTPRICE', width: 50, align: 'right', renderer: function(val, item){
            return val;
        }},
        {title:'最低价', name:'LOWESTPRICE', width: 50, hidden: false, align: 'right',renderer: function(val, item){
            return val;
        }}


    ];

    $('#quoteTable').fastGrid({
        width: '100%',
        height: '100%',
        url: '../public/stockQuotePage.json',
        method: 'get',
        root:'items',
        remoteSort: true,
        scroll: 'vertical',
        multiSelect: true,
        nowrap: true,
        cols: cols,
        onSuccess:function (fg, data) {
            $('#search').paginator('render', {
                pageNo:data.pageNo,
                totalCount:data.totalCount,
                pageSize:data.pageSize
            });
        }
    });

    $('#search').paginator({
        style:'search',
        pageSize:50,
        onLoad:function (pageNo, pageSize) {

            $('#quoteTable').fastGrid('load', {
                pageNo:pageNo,
                pageSize:pageSize
            });
        }
    });

});</script>
</body>
</html>