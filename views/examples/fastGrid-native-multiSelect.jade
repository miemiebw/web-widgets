extends ../layout

block append link
  link(rel='stylesheet', href='/scripts/widgets/fastGrid/fastGrid.css')
  style
    .wrapper{
      width: 50%;
      height: 50%;
      margin:0px auto;
      padding: 80px 0px;
    }
    .fields{
      margin: 5px 0px;
    }

    .fields .button{
      margin: 0px 5px 0px 0px;
    }

    .btnPrice{
      display: block;
      width: 16px;
      height: 16px;
      margin: 0px auto;
      background: url(../images/botton_g1.gif) no-repeat;
    }
    .btnPriceSelected{
      background: url(../images/botton_g2.gif) no-repeat;
    }
    .btnDeep{
      display: block;
      width: 16px;
      height: 16px;
      margin: 0px auto;
      background: url(../images/botton_g4.gif) no-repeat;
    }
    .btnDeepSelected{
      background: url(../images/botton_g3.gif) no-repeat;
    }
    .btnCal{
      display: block;
      width: 17px;
      height: 17px;
      margin: 0px auto;
      background: url(../images/rl.png) no-repeat;
    }
    .btnCalSelected{
      background: url(../images/rl1.png) no-repeat;
    }
block content
  div.wrapper
    table#hotTable
    div.fields
      a#btnDisplay.button 显示数据
      a#btnGetSelected.button 获取选中数据
      a#btnSelect5.button 选中第5行
      a#btnDeselectAll.button 清除选中
    div.message


block append script
  script(src='/scripts/widgets/fastGrid/fastGrid.js')
  script(src='/scripts/json2.js')

  script
    $(document).ready(function(){
      var items = [
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.23, inPrice:12.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.25, inPrice:22.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.45, range:-0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.44, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.21, inPrice:7.23, range:-0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:23.77, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:45.21, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:13.30, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:17.22, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:19.92, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:12.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:22.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.45, range:-0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.44, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:7.23, range:-0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:23.77, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:45.21, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:13.30, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:17.22, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:12.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:22.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.45, range:-0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.44, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:7.23, range:-0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:23.77, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:45.21, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:13.30, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:17.22, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:19.92, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:12.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:22.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.45, range:-0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.44, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:7.23, range:-0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:23.77, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:45.21, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:13.30, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:17.22, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:12.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:22.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.45, range:-0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.44, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:7.23, range:-0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:23.77, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:45.21, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:13.30, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:17.22, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:19.92, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:12.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:22.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.45, range:-0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.44, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:7.23, range:-0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:23.77, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:45.21, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:13.30, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:17.22, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:12.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:22.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.45, range:-0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.44, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:7.23, range:-0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:23.77, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:45.21, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:13.30, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:17.22, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:19.92, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:12.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:22.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.45, range:-0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.44, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:7.23, range:-0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:23.77, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:45.21, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:13.30, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:17.22, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:22.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.45, range:-0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.44, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:7.23, range:-0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:23.77, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:45.21, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:13.30, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:17.22, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:19.92, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:12.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:22.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.45, range:-0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.44, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:7.23, range:-0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:23.77, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:45.21, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:13.30, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:17.22, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:22.52, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.45, range:-0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:3.44, range:0.21 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:7.23, range:-0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:23.77, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:45.21, range:0.215 ,marketValue: '5.38万'},
          {secuCode:'600000', secuAbbr:'浦发银行', newPrice:12.22, inPrice:13.30, range:0.215 ,marketValue: '5.38万'}
      ];

      $('#hotTable').fastGrid({
        width: '100%',
        height: '100%',
        multiSelect: true,
        items: items,
        nowrap: true,
        fitCols:true,
        cols: [
          {title:'行情', name:'', width: 30, align: 'center',sortable: true,lockWidth:true, renderer: function(val,item,items,$row,rowIndex){

            return '<a href="#" class="btnPrice"></a>';
          }},
          {title:'名称', name:'', width: 150, align: 'center', renderer: function(val,item){
            return item.secuAbbr + '(' + item.secuCode + ')';
          }},
          {title:'最新价', name:'newPrice', width: 80, align: 'right', renderer: function(val,item){
            if(item.range > 0){
              return '<span style="color: #b00">' + val + '</span>';
            }else if(item.range < 0){
              return '<span style="color: #0b0">' + val + '</span>';
            }
            return val;
          }},
          {title:'买入价', name:'inPrice',type: 'number', width: 80, sortable: true, align: 'right'},
          {title:'涨跌幅%', name:'range', width: 80,type: 'number', sortable: true, align: 'right', renderer: function(val,item){
            if(item.range > 0){
              return '<span style="color: #b00">' + val + '</span>';
            }else if(item.range < 0){
              return '<span style="color: #0b0">' + val + '</span>';
            }
            return val;
          }},
          {title:'市值', name:'marketValue', width: 80,lockDisplay: true, align: 'right'},
          {title:'盈亏', name:'marketValue', width: 80, hidden: true, align: 'right'},
          {title:'深度', name:'', width: 30, align: 'center',lockWidth:true, renderer: function(val,item,items,rowIndex,row){

            return '<a href="#" class="btnDeep"></a>';
          }},
          {title:'日历', name:'', width: 30, align: 'center',lockWidth:true, renderer: function(val,item,items,rowIndex,row){

            return '<a href="#" class="btnCal"></a>';
          }}
        ],
        onSelected: function(fastGrid, item, rowIndex, colIndex){
                    console.log(colIndex);
                    if(colIndex === 0){
                        alert(JSON.stringify(item));
                    }
                }
      });



        $('#btnDisplay').on('click', function(e){
            e.preventDefault();
            $('#hotTable').fastGrid('load', items);
        });
        $('#btnGetSelected').on('click', function(e){
            e.preventDefault();
            $('.message').text(JSON.stringify($('#hotTable').fastGrid('selected')));
        });
        $('#btnSelect5').on('click', function(e){
            e.preventDefault();
            $('#hotTable').fastGrid('select', 4);
        });
        $('#btnDeselectAll').on('click', function(e){
            e.preventDefault();
            $('#hotTable').fastGrid('deselect', 'all');
        });


    });